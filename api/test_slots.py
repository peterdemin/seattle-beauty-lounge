import datetime

from api.slots import SlotsLoader


def test_slots_loader():
    slots = SlotsLoader()
    got = slots.load_hours_of_operation()
    assert got == {
        0: [datetime.time(10, 0), datetime.time(19, 0)],
        1: [datetime.time(10, 0), datetime.time(19, 0)],
        2: [datetime.time(10, 0), datetime.time(12, 30)],
        3: [datetime.time(10, 0), datetime.time(19, 30)],
        4: [datetime.time(10, 0), datetime.time(19, 30)],
        5: [datetime.time(10, 0), datetime.time(17, 0)],
    }


def test_gen_ranges() -> None:
    slots = SlotsLoader()
    the_day = datetime.date(2024, 12, 27)
    got = slots.gen_ranges(the_day)
    assert len(got) == 7 * 6
    assert got == {
        "2024-12-28": [["10:00", "17:00"]],
        "2024-12-29": [],
        "2024-12-30": [["10:00", "19:00"]],
        "2024-12-31": [["10:00", "19:00"]],
        "2025-01-01": [["10:00", "12:30"]],
        "2025-01-02": [["10:00", "19:30"]],
        "2025-01-03": [["10:00", "19:30"]],
        "2025-01-04": [["10:00", "17:00"]],
        "2025-01-05": [],
        "2025-01-06": [["10:00", "19:00"]],
        "2025-01-07": [["10:00", "19:00"]],
        "2025-01-08": [["10:00", "12:30"]],
        "2025-01-09": [["10:00", "19:30"]],
        "2025-01-10": [["10:00", "19:30"]],
        "2025-01-11": [["10:00", "17:00"]],
        "2025-01-12": [],
        "2025-01-13": [["10:00", "19:00"]],
        "2025-01-14": [["10:00", "19:00"]],
        "2025-01-15": [["10:00", "12:30"]],
        "2025-01-16": [["10:00", "19:30"]],
        "2025-01-17": [["10:00", "19:30"]],
        "2025-01-18": [["10:00", "17:00"]],
        "2025-01-19": [],
        "2025-01-20": [["10:00", "19:00"]],
        "2025-01-21": [["10:00", "19:00"]],
        "2025-01-22": [["10:00", "12:30"]],
        "2025-01-23": [["10:00", "19:30"]],
        "2025-01-24": [["10:00", "19:30"]],
        "2025-01-25": [["10:00", "17:00"]],
        "2025-01-26": [],
        "2025-01-27": [["10:00", "19:00"]],
        "2025-01-28": [["10:00", "19:00"]],
        "2025-01-29": [["10:00", "12:30"]],
        "2025-01-30": [["10:00", "19:30"]],
        "2025-01-31": [["10:00", "19:30"]],
        "2025-02-01": [["10:00", "17:00"]],
        "2025-02-02": [],
        "2025-02-03": [["10:00", "19:00"]],
        "2025-02-04": [["10:00", "19:00"]],
        "2025-02-05": [["10:00", "12:30"]],
        "2025-02-06": [["10:00", "19:30"]],
        "2025-02-07": [["10:00", "19:30"]],
    }
